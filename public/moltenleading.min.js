/*! Molten Leading, plain JavaScript version, v1.20 */
(function(f,e,k){function h(a,c){this.body=e.body;this.selector=a;this.ticking=!1;this.testel=null;this.eminpx=this.reminpx=0;this.options=g.extend({},h.defaultOptions,c);"querySelector"in e&&e.querySelector(this.selector)?this.elements=e.querySelectorAll(this.selector):e.getElementsByTagName(this.selector)&&(this.elements=e.getElementsByTagName(this.selector))}f.requestAnimFrame=function(){return f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||function(a){f.setTimeout(a,
1E3/60)}}();var g={extend:function(a){var c=arguments;this.forEach(c,function(b){b=c[b];for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])});return a},bind:function(a,c){return function(){a.apply(c,arguments)}},forEach:function(a,c,b){var d=a.length,f,e;for(e=0;e<d&&(f=c.call(b,e,a[e]),!1!==f);e++);},onResizeEnd:function(a,c,b){var d;return function(){c=c||250;clearTimeout(d);d=setTimeout(function(){a.apply(b,arguments)},c)}},addListener:function(a,c,b,d){"addEventListener"in a?a.addEventListener(c,
b,d):"attachEvent"in a&&("object"===typeof b&&b.handleEvent?a.attachEvent("on"+c,function(){b.handleEvent.call(b)}):a.attachEvent("on"+c,b))}};h.prototype={constructor:h,init:function(){"px"!==this.options.units&&(this.testel=e.createElement("div"),this.testStyles(this.testel),this.throttledUpdate=g.onResizeEnd(this.doUnitConversions,100,this),g.addListener(f,"resize",this.throttledUpdate,!1),this.doUnitConversions());g.addListener(f,"resize",this,!1);this.update()},refresh:function(){this.doUnitConversions();
this.update()},update:function(){g.forEach(this.elements,this.calcLeading,this);this.ticking=!1},handleEvent:function(){this.requestTick()},doUnitConversions:function(){"rem"===this.options.units?this.getRems():"em"===this.options.units&&g.forEach(this.elements,this.getEms,this)},calcLeading:function(a,c){var b=0,d=this.options,b="rem"===d.units?c.offsetWidth/this.reminpx:"em"===d.units?c.offsetWidth/this.eminpx:c.offsetWidth,b=parseInt((b-d.minwidth)/(d.maxwidth-d.minwidth)*100,10),e=d.minline+(d.maxline-
d.minline)*b/100;if(0>=b||e<d.minline)e=d.minline;else if(100<=b||e>d.maxline)e=d.maxline;c.style.lineHeight=e},getRems:function(){this.origFontSize=this.body.style.fontSize;this.body.style.fontSize="100%";this.body.appendChild(this.testel);this.reminpx=parseFloat(this.testel.offsetWidth,10);this.body.contains(this.testel)&&this.body.removeChild(this.testel);this.body.style.fontSize=this.origFontSize},getEms:function(a,c){c.appendChild(this.testel);this.eminpx=parseFloat(this.testel.offsetWidth,10);
this.body.contains(this.testel)&&this.testel.parentNode.removeChild(this.testel)},testStyles:function(a){a=a.style;a.visibility="hidden";a.position="absolute";a.fontSize="1em";a.width="1em";a.padding="0";a.border="0"},requestTick:function(){this.ticking||(requestAnimFrame(g.bind(this.update,this)),this.ticking=!0)}};h.defaultOptions={minline:1.2,maxline:1.8,minwidth:320,maxwidth:768,units:"px"};f.moltenLeading=function(a,c){var b=new h(a,c);b.init();return b}})(window,document);
